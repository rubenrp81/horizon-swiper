/*
 * Horizon Swiper
 * Version 1.1.0
 * Domain ( http://horizon-swiper.sebsauer.de/ )
 * Copyright 2015 Sebastian Sauer ( http://www.sebsauer.de/ )
 * Licensed under MIT ( https://github.com/sebsauer90/horizon-swiper/blob/master/LICENSE )
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t){"use strict";var e={item:".horizon-item",showItems:"auto",dots:!1,numberedDots:!1,arrows:!0,arrowPrevText:"",arrowNextText:"",animationSpeed:500,mouseDrag:!0,onStart:function(){},onEnd:function(){},onSlideStart:function(){},onSlideEnd:function(){},onDragStart:function(){},onDragEnd:function(){}};const i={$window:t(window),$document:t(document),innerClass:"horizon-inner",outerClass:"horizon-outer",dotContainer:'<nav class="horizon-dots"></nav>',arrowPrev:['<button class="horizon-prev">',"</button>"],arrowNext:['<button class="horizon-next">',"</button>"],showArrowsClass:"arrows",showDotsClass:"dots",initializedClass:"initialized",mouseDragClass:"mouse-drag",firstItemClass:"first-item",lastItemClass:"last-item"};var s=function(){function s(s,n){var o=this;o.settings=t.extend({},e,n),o.$element=t(s),o.$items=o.$element.find(this.settings.item),o.$inner=null,o.$outer=null,o.$dots=null,o.$arrowPrev=null,o.$arrowNext=null,o.initialized=!1,o.maxHeight=0,o.innerContainerWidth=0,o.viewportSize=0,o.isAnimate=!1;var r=function(){o.initialized?o.setSizes():setTimeout(()=>{r()},1e3)};i.$document.ready(()=>{o.init()}),i.$window.on("load",()=>{r()})}return s.prototype.init=function(){this._setWrapper(),this._addArrows(),this._addDots(),this._mouseDrag(),this.setSizes(),this._resize(),this._checkPosition(),this.initialized=!0},s.prototype.setSizes=function(){this.maxHeight=0,this.innerContainerWidth=0;for(var e=0;e<this.$items.length;++e){var s=t(this.$items[e]),n=s.outerHeight(!0),o=s.outerWidth(!0);n>this.maxHeight&&(this.maxHeight=n),this.innerContainerWidth+=o}this.viewportSize=this.$inner.width(),this.$outer.css({"max-height":this.maxHeight+"px"}),this.viewportSize<this.innerContainerWidth?(this.$element.addClass(i.initializedClass),this.settings.arrows&&this.$element.addClass(i.showArrowsClass),this.settings.dots&&this.$element.addClass(i.showDotsClass)):(this.$element.removeClass(i.initializedClass),this.$element.addClass(i.showArrowsClass))},s.prototype._resize=function(){var t=this;i.$window.resize(()=>{clearTimeout(null),setTimeout(()=>{t.setSizes(),t._checkPosition()},250)})},s.prototype._setWrapper=function(){var e=0;this.$items.wrapAll('<div class="'+i.outerClass+'">'),this.$items.wrapAll('<div class="'+i.innerClass+'">'),this.$inner=this.$element.find("."+i.innerClass),this.$outer=this.$element.find("."+i.outerClass),"auto"!==this.settings.showItems&&this.settings.showItems===parseInt(this.settings.showItems,10)&&(e=100/this.settings.showItems,this.$items.css({width:e+"%"}));for(var s=0;s<this.$items.length;++s)t(this.$items[s]).attr("data-horizon-index",s)},s.prototype._addDots=function(){var e=this;if(e.settings.dots){e.$dots=t(i.dotContainer);for(var s=0;s<e.$items.length;++s){var n=e.settings.numberedDots?s:"",o=t('<button class="horizon-dot" data-horizon-target="'+s+'">'+n+"</button>");e.$dots.append(o)}e.$element.append(e.$dots),e.$dots.find("button").on("click",function(i){i.preventDefault();var s=t(this).attr("data-horizon-target");e._dotScroll(s)})}},s.prototype._dotScroll=function(e){var i=this,s=i.$dots.find('[data-horizon-index="'+e+'"]').outerWidth(!0),n=0,o=0,r=i.viewportSize/2-s/2;i.isAnimate=!0,i.settings.onSlideStart();for(var a=0;a<i.$items.length;++a)a<e&&(n+=t(i.$items[a]).outerWidth(!0));(o=n-r)<0?o=0:o>i.innerContainerWidth-i.viewportSize&&(o=i.innerContainerWidth-i.viewportSize),i.$inner.animate({scrollLeft:o},i.settings.animationSpeed,()=>{i._checkPosition(),i.settings.onSlideEnd(),e===i.$items.length?i.settings.onEnd():0===e&&i.settings.onStart(),i.isAnimate=!1})},s.prototype._addArrows=function(){var e=this;!0===e.settings.arrows&&(e.$arrowPrev=t(i.arrowPrev[0]+e.settings.arrowPrevText+i.arrowPrev[1]),e.$arrowNext=t(i.arrowNext[0]+e.settings.arrowNextText+i.arrowNext[1]),e.$arrowNext.insertAfter(e.$outer),e.$arrowPrev.insertAfter(e.$outer),e.$element.addClass(i.firstItemClass),e.$arrowPrev.attr("disabled","disabled"),e.$arrowPrev.on("click",t=>{t.preventDefault(),e.isAnimate||e._scrollTo("previous")}),e.$arrowNext.on("click",t=>{t.preventDefault(),e.isAnimate||e._scrollTo("next")}))},s.prototype._scrollTo=function(t){var e=this,i=e._getOffset(t);e.isAnimate=!0,"end"!==i&&"start"!==i?(e.settings.onSlideStart(),e.$inner.animate({scrollLeft:i[0]},e.settings.animationSpeed,()=>{"end"===i[1]?e.settings.onEnd():"start"===i[1]&&e.settings.onStart(),e._checkPosition(),e.settings.onSlideEnd(),e.isAnimate=!1})):e.isAnimate=!1},s.prototype._getOffset=function(e){var i=this.$inner.scrollLeft(),s=0,n=i+this.viewportSize;if("next"===e&&i+this.viewportSize===this.innerContainerWidth)return"end";if("previous"===e&&0===i)return"start";for(var o=0;o<this.$items.length;++o){var r=t(this.$items[o]).outerWidth(!0),a="";if(s+=r,"next"===e&&s>n)return o+1===this.$items.length&&(a="end"),[s-this.viewportSize,a];if("previous"===e&&s>=i)return s-r<=0&&(a="start"),[s-r,a]}},s.prototype._mouseDrag=function(){var t=this,e=!1,s=!1,n=0,o=0,r=(t.$inner.offset().left,0),a=!1,h=!1,l=null;t.$element.on({touchstart:i=>{e=!0,a=!0,h=!0,t.settings.onDragStart()}}),i.$document.on({touchend:e=>{a&&(t._checkPosition(),t.settings.onDragEnd(),a=!1)}}),t.$inner.scroll(function(){clearTimeout(l),l=setTimeout(function(){h&&(t._checkPosition(),t.settings.onDragEnd(),h=!1)},250)}),t.settings.mouseDrag&&!e&&(t.$element.addClass(i.mouseDragClass),t.$element.on({mousedown:e=>{s=!0,n=e.pageX,o=t.$inner.scrollLeft(),"button"!==e.target.tagName.toLowerCase()&&t.settings.onDragStart()}}),i.$document.on({mousemove:i=>{s&&function(i){e||(r=o+(n-i.pageX),t.$inner.scrollLeft(r))}(i)},mouseup:e=>{s&&"button"!==e.target.tagName.toLowerCase()&&(t._checkPosition(),t.settings.onDragEnd()),s=!1}}))},s.prototype._checkPosition=function(){var t=this.$inner.scrollLeft();this.settings.arrows&&this._checkArrowState(t),this.settings.dots&&this._checkActiveDots(t)},s.prototype._checkActiveDots=function(e){for(var i=0,s=0,n=[e,e+this.viewportSize],o=0;o<this.$items.length;++o){var r=t(this.$items[o]).outerWidth(!0);s+=r,i+r/2>=n[0]&&s-r/2<=n[1]?this.$dots.find('[data-horizon-target="'+o+'"]').addClass("active"):this.$dots.find('[data-horizon-target="'+o+'"]').removeClass("active"),i+=r}},s.prototype._checkArrowState=function(t){t+this.viewportSize>=this.innerContainerWidth-1?(this.$element.addClass(i.lastItemClass),this.$arrowNext.attr("disabled","disabled"),this.$element.removeClass(i.firstItemClass),this.$arrowPrev.removeAttr("disabled")):t<=0?(this.$element.addClass(i.firstItemClass),this.$arrowPrev.attr("disabled","disabled"),this.$element.removeClass(i.lastItemClass),this.$arrowNext.removeAttr("disabled")):(this.$element.removeClass(i.lastItemClass).removeClass(i.firstItemClass),this.$arrowPrev.removeAttr("disabled"),this.$arrowNext.removeAttr("disabled"))},s}();t.fn.horizonSwiper=function(e){return this.each(function(){t.data(this,"horizonSwiper")||t.data(this,"horizonSwiper",new s(this,e))}),this}});
